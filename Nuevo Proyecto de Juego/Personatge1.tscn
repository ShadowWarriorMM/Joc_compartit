[gd_scene load_steps=52 format=2]

[ext_resource path="res://Fotos/Link_blau.png" type="Texture" id=1]
[ext_resource path="res://Cavaller.gd" type="Script" id=2]
[ext_resource path="res://Fotos/ARIALBI.TTF" type="DynamicFontData" id=3]
[ext_resource path="res://RichTextLabel5.gd" type="Script" id=4]
[ext_resource path="res://Timer5.gd" type="Script" id=5]
[ext_resource path="res://Timer4.gd" type="Script" id=6]
[ext_resource path="res://Timer.gd" type="Script" id=7]
[ext_resource path="res://Timer2.gd" type="Script" id=8]
[ext_resource path="res://Timer3.gd" type="Script" id=9]
[ext_resource path="res://AnimatedSprite.gd" type="Script" id=10]
[ext_resource path="res://AnimatedSprite2.gd" type="Script" id=11]
[ext_resource path="res://AnimatedSprite3.gd" type="Script" id=12]
[ext_resource path="res://Fotos/Vides.png" type="Texture" id=13]
[ext_resource path="res://RichTextLabel8.gd" type="Script" id=14]
[ext_resource path="res://RichTextLabel100.gd" type="Script" id=15]
[ext_resource path="res://Audio/Espasa.mp3" type="AudioStream" id=16]
[ext_resource path="res://Audio/Mal_espasa.mp3" type="AudioStream" id=17]

[sub_resource type="AtlasTexture" id=53]
atlas = ExtResource( 1 )
region = Rect2( 239, 387, 58, 65 )

[sub_resource type="AtlasTexture" id=54]
atlas = ExtResource( 1 )
region = Rect2( 296, 386, 58, 65 )

[sub_resource type="AtlasTexture" id=55]
atlas = ExtResource( 1 )
region = Rect2( 359, 386, 67, 65 )

[sub_resource type="AtlasTexture" id=56]
atlas = ExtResource( 1 )
region = Rect2( 0, 200, 49, 60 )

[sub_resource type="AtlasTexture" id=57]
atlas = ExtResource( 1 )
region = Rect2( 49, 200, 49, 60 )

[sub_resource type="AtlasTexture" id=58]
atlas = ExtResource( 1 )
region = Rect2( 91, 200, 47, 60 )

[sub_resource type="AtlasTexture" id=59]
atlas = ExtResource( 1 )
region = Rect2( 138, 200, 47, 60 )

[sub_resource type="AtlasTexture" id=60]
atlas = ExtResource( 1 )
region = Rect2( 185, 200, 47, 60 )

[sub_resource type="AtlasTexture" id=61]
atlas = ExtResource( 1 )
region = Rect2( 237, 200, 46, 60 )

[sub_resource type="AtlasTexture" id=62]
atlas = ExtResource( 1 )
region = Rect2( 503, 386, 57, 65 )

[sub_resource type="AtlasTexture" id=69]
atlas = ExtResource( 1 )
region = Rect2( 417, 547, 64, 61 )

[sub_resource type="AtlasTexture" id=70]
atlas = ExtResource( 1 )
region = Rect2( 489, 547, 78, 61 )

[sub_resource type="AtlasTexture" id=71]
atlas = ExtResource( 1 )
region = Rect2( 571, 547, 75, 61 )

[sub_resource type="AtlasTexture" id=72]
atlas = ExtResource( 1 )
region = Rect2( 646, 547, 75, 61 )

[sub_resource type="AtlasTexture" id=63]
atlas = ExtResource( 1 )
region = Rect2( 747, 40, 50, 65 )

[sub_resource type="AtlasTexture" id=64]
atlas = ExtResource( 1 )
region = Rect2( 498, 36, 50, 65 )

[sub_resource type="AtlasTexture" id=65]
atlas = ExtResource( 1 )
region = Rect2( 513, 472, 50, 65 )

[sub_resource type="AtlasTexture" id=66]
atlas = ExtResource( 1 )
region = Rect2( 571, 461, 50, 68 )

[sub_resource type="AtlasTexture" id=67]
atlas = ExtResource( 1 )
region = Rect2( 621, 466, 50, 65 )

[sub_resource type="AtlasTexture" id=68]
atlas = ExtResource( 1 )
region = Rect2( 678, 466, 55, 65 )

[sub_resource type="SpriteFrames" id=4]
animations = [ {
"frames": [ SubResource( 53 ), SubResource( 54 ), SubResource( 55 ) ],
"loop": false,
"name": "Ataca",
"speed": 8.0
}, {
"frames": [ SubResource( 56 ), SubResource( 57 ), SubResource( 58 ), SubResource( 59 ), SubResource( 60 ), SubResource( 61 ) ],
"loop": true,
"name": "Camina",
"speed": 6.0
}, {
"frames": [ SubResource( 62 ) ],
"loop": false,
"name": "Cubreix",
"speed": 3.0
}, {
"frames": [ SubResource( 69 ), SubResource( 70 ), SubResource( 71 ), SubResource( 72 ) ],
"loop": false,
"name": "Dispara",
"speed": 5.0
}, {
"frames": [ SubResource( 63 ) ],
"loop": true,
"name": "Idle ",
"speed": 5.0
}, {
"frames": [ SubResource( 64 ) ],
"loop": false,
"name": "Mor",
"speed": 3.0
}, {
"frames": [ SubResource( 65 ), SubResource( 66 ), SubResource( 67 ), SubResource( 68 ) ],
"loop": false,
"name": "Salta",
"speed": 5.0
} ]

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 14, 16.5 )

[sub_resource type="RectangleShape2D" id=40]
extents = Vector2( 11.5, 14.25 )

[sub_resource type="RectangleShape2D" id=41]
extents = Vector2( 9.75, 3.625 )

[sub_resource type="RectangleShape2D" id=42]
extents = Vector2( 9.5718, 3.4375 )

[sub_resource type="AtlasTexture" id=50]
flags = 4
atlas = ExtResource( 13 )
region = Rect2( 24, 21, 160, 155 )

[sub_resource type="AtlasTexture" id=51]
flags = 4
atlas = ExtResource( 13 )
region = Rect2( 330, 465, 165, 155 )

[sub_resource type="SpriteFrames" id=52]
animations = [ {
"frames": [ SubResource( 50 ) ],
"loop": true,
"name": "Normal",
"speed": 5.0
}, {
"frames": [ SubResource( 51 ) ],
"loop": true,
"name": "Perd_vida",
"speed": 5.0
} ]

[sub_resource type="DynamicFont" id=48]
size = 10
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=47]
size = 10
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=43]
size = 9
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=44]
size = 10
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=45]
size = 10
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=46]
size = 10
font_data = ExtResource( 3 )

[node name="Cavaller" type="KinematicBody2D"]
position = Vector2( 74, 538 )
collision_layer = 4
script = ExtResource( 2 )

[node name="AudioStreamPlayer2D2" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 17 )

[node name="Animació" type="AnimatedSprite" parent="."]
position = Vector2( -18, -16 )
scale = Vector2( 0.5, 0.52953 )
frames = SubResource( 4 )
animation = "Dispara"
centered = false
flip_h = true

[node name="Camera1" type="Camera2D" parent="."]
position = Vector2( 35, -69 )
zoom = Vector2( 0.3, 0.3 )

[node name="Hitbox" type="Area2D" parent="."]
position = Vector2( -61, 19 )

[node name="Area" type="CollisionShape2D" parent="Hitbox"]
position = Vector2( 59, -17 )
shape = SubResource( 2 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2( -2, 2 )
shape = SubResource( 40 )

[node name="Espasa_dreta" type="Area2D" parent="."]
position = Vector2( 13, -13 )

[node name="Espasa_dreta_colisió" type="CollisionShape2D" parent="Espasa_dreta"]
position = Vector2( 8, 6 )
shape = SubResource( 41 )
disabled = true

[node name="Espasa_esquerra" type="Area2D" parent="."]
position = Vector2( -19, -7 )

[node name="Espasa_esquerra_colisió" type="CollisionShape2D" parent="Espasa_esquerra"]
position = Vector2( -6, 0 )
shape = SubResource( 42 )
disabled = true

[node name="Duració_mort" type="Timer" parent="."]
wait_time = 1.5
one_shot = true

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
position = Vector2( -161, -144 )
scale = Vector2( 0.138, 0.14 )
frames = SubResource( 52 )
animation = "Normal"
script = ExtResource( 10 )

[node name="AnimatedSprite2" type="AnimatedSprite" parent="."]
position = Vector2( -184, -144 )
scale = Vector2( 0.138, 0.14 )
frames = SubResource( 52 )
animation = "Normal"
script = ExtResource( 11 )

[node name="AnimatedSprite3" type="AnimatedSprite" parent="."]
position = Vector2( -208, -144 )
scale = Vector2( 0.1375, 0.140323 )
frames = SubResource( 52 )
animation = "Normal"
script = ExtResource( 12 )

[node name="RichTextLabel6" type="RichTextLabel" parent="."]
visible = false
margin_left = -98.0
margin_top = -92.0
margin_right = 92.0
margin_bottom = -31.0
custom_fonts/normal_font = SubResource( 48 )
text = "Molt bé, et deixo que tu sol et passis el nivell. Derrota els enemics i busca les monedes amagades."

[node name="RichTextLabel5" type="RichTextLabel" parent="."]
visible = false
margin_left = -74.0
margin_top = -78.0
margin_right = 105.0
margin_bottom = -10.0
custom_fonts/normal_font = SubResource( 47 )
text = "Prova la teva nova habilitat! Prem la E per cubrir-te."
script = ExtResource( 4 )

[node name="RichTextLabel2" type="RichTextLabel" parent="."]
visible = false
margin_left = -80.0
margin_top = -73.0
margin_right = 113.0
margin_bottom = -26.0
custom_fonts/normal_font = SubResource( 43 )
text = "Dins de l'hibernacle hi havia un escut. Acabes de desbloquejar la teva primera habilitat!"

[node name="RichTextLabel" type="RichTextLabel" parent="."]
visible = false
margin_left = -77.0
margin_top = -79.0
margin_right = 117.0
margin_bottom = -16.0
custom_fonts/normal_font = SubResource( 44 )
text = "Si prems la tecla E podràs cubrir-te amb l'escut. Mentre estiguis cobert no podràs rebre cap mena de mal."

[node name="RichTextLabel3" type="RichTextLabel" parent="."]
visible = false
margin_left = -62.0
margin_top = -77.0
margin_right = 135.0
margin_bottom = -14.0
custom_fonts/normal_font = SubResource( 45 )
text = "Aquesta habilitat té un petit cooldown, això significa que hauràs d'esperar un petit temps per poder-la tornar a fer servir."

[node name="RichTextLabel4" type="RichTextLabel" parent="."]
visible = false
margin_left = -87.0
margin_top = -87.0
margin_right = 109.0
margin_bottom = -19.0
custom_fonts/normal_font = SubResource( 46 )
text = "No és una habilitat molt poderosa, comparada amb la dels seguents nivells, però el seu cooldown és molt petit."

[node name="Timer" type="Timer" parent="."]
wait_time = 4.25
one_shot = true
script = ExtResource( 7 )

[node name="Timer2" type="Timer" parent="."]
wait_time = 4.25
one_shot = true
script = ExtResource( 8 )

[node name="Timer3" type="Timer" parent="."]
wait_time = 6.5
one_shot = true
script = ExtResource( 9 )

[node name="Timer4" type="Timer" parent="."]
wait_time = 4.25
one_shot = true
script = ExtResource( 6 )

[node name="Timer5" type="Timer" parent="."]
wait_time = 5.0
one_shot = true
script = ExtResource( 5 )

[node name="Timer6" type="Timer" parent="."]
one_shot = true

[node name="RichTextLabel7" type="RichTextLabel" parent="."]
margin_left = 111.0
margin_top = -149.0
margin_right = 307.0
margin_bottom = -81.0
custom_fonts/normal_font = SubResource( 46 )
text = "Monedes:"

[node name="RichTextLabel8" type="RichTextLabel" parent="."]
margin_left = 165.0
margin_top = -148.0
margin_right = 361.0
margin_bottom = -80.0
custom_fonts/normal_font = SubResource( 46 )
text = "6"
script = ExtResource( 14 )

[node name="RichTextLabel9" type="RichTextLabel" parent="."]
margin_left = 110.0
margin_top = -130.0
margin_right = 306.0
margin_bottom = -62.0
custom_fonts/normal_font = SubResource( 46 )
text = "Enemics:"

[node name="RichTextLabel10" type="RichTextLabel" parent="."]
margin_left = 165.0
margin_top = -130.0
margin_right = 361.0
margin_bottom = -62.0
custom_fonts/normal_font = SubResource( 46 )
text = "6"
script = ExtResource( 15 )

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 16 )

[node name="Timer7" type="Timer" parent="."]
wait_time = 1.25
one_shot = true

[node name="Timer8" type="Timer" parent="."]
wait_time = 1.25
one_shot = true

[node name="Cooldown fletxa" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[connection signal="animation_finished" from="Animació" to="." method="_on_Animaci_animation_finished"]
[connection signal="body_entered" from="Hitbox" to="." method="_on_Hitbox_body_entered"]
[connection signal="body_entered" from="Espasa_dreta" to="." method="_on_Espasa_dreta_body_entered"]
[connection signal="body_entered" from="Espasa_esquerra" to="." method="_on_Espasa_esquerra_body_entered"]
[connection signal="timeout" from="Duració_mort" to="." method="_on_Duraci_mort_timeout"]
[connection signal="timeout" from="Timer" to="Timer" method="_on_Timer_timeout"]
[connection signal="timeout" from="Timer2" to="Timer2" method="_on_Timer2_timeout"]
[connection signal="timeout" from="Timer3" to="Timer3" method="_on_Timer3_timeout"]
[connection signal="timeout" from="Timer4" to="Timer4" method="_on_Timer4_timeout"]
[connection signal="timeout" from="Timer5" to="Timer5" method="_on_Timer5_timeout"]
[connection signal="finished" from="AudioStreamPlayer2D" to="." method="_on_AudioStreamPlayer2D_finished"]
[connection signal="timeout" from="Timer7" to="." method="_on_Timer7_timeout"]
[connection signal="timeout" from="Timer8" to="." method="_on_Timer8_timeout"]
[connection signal="timeout" from="Cooldown fletxa" to="." method="_on_Cooldown_fletxa_timeout"]
